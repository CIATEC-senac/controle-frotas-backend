<html lang='pt-BR'>
  <head>
    <meta charset='UTF-8' />
    <title>Relatório de Rotas</title>
    <style>
      body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 40px; background-color: #fff; color: #333; } .header { display:
      flex; justify-content: space-between; align-items: center; margin-bottom:
      30px; } .header img { height: 60px; } .header h1 { font-size: 24px; color:
      #003366; margin: 0; } section { background-color: #fff; border-radius:
      8px; padding: 20px; margin-bottom: 30px; box-shadow: 0 0 8px rgba(0, 0, 0,
      0.05); } h2 { border-left: 4px solid #007bff; padding-left: 10px;
      margin-bottom: 16px; color: #003366; } p { margin: 6px 0; } table { width:
      100%; border-collapse: collapse; margin-top: 16px; } th, td { border: 1px
      solid #dee2e6; padding: 10px; text-align: left; font-size: 14px; } th {
      background-color: #e9ecef; color: #333; } tfoot td { font-weight: bold;
      background-color: #f1f1f1; } .flex-container { display: flex;
      justify-content: space-between; gap: 20px; } .flex-container div { flex:
      1; } .history-table { width: 100%; border-collapse: collapse; margin-top:
      16px; } .history-table th, .history-table td { border: 1px solid #dee2e6;
      padding: 10px; text-align: left; font-size: 14px; } .history-table th {
      background-color: #e9ecef; color: #333; } .history-table { width: 100%;
      border-collapse: collapse; margin-top: 16px; } .history-table th,
      .history-table td { border: 1px solid #dee2e6; padding: 10px; text-align:
      left; font-size: 14px; } .history-table th { background-color: #e9ecef;
      color: #333; }
    </style>
  </head>
  <body>
    <div class='header'>
      <img
        style='height: 130px; width: 150px;'
        src='https://static.wixstatic.com/media/f19bb9_c7bbcca3a3684546bb14455c45edff18~mv2.png/v1/fill/w_260,h_122,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/LOGO.png'
        alt='Logo da Empresa'
      />
      <h1>Relatório de Rotas</h1>
    </div>

    <section>
      <p><b>Data de geração:</b> {{data}}</p>
    </section>

    <section>
      <h2>Dados do Motorista e Veículo</h2>
      <div class='flex-container'>
        <div>
          <h3>Motorista</h3>
          <p><b>Nome:</b> {{user.name}}</p>
          <p><b>Matrícula:</b> {{user.registration}}</p>
          <p><b>CNH:</b> {{user.cnh}}</p>
          <p><b>Cargo:</b> {{user.role}}</p>
        </div>
        <div>
          <h3>Veículo</h3>
          <p><b>Modelo:</b> {{vehicle.model}}</p>
          <p><b>Placa:</b> {{vehicle.plate}}</p>
          <p><b>Ano de Fabricação:</b> {{vehicle.year}}</p>
          <p><b>Capacidade:</b> {{vehicle.capacity}} pessoas</p>
        </div>
      </div>
    </section>

    <section>
      <h2>Rotas Realizadas</h2>
      <table>
        <thead>
          <tr>
            <th>Origem</th>
            <th>Destino</th>
            <th>Paradas</th>
            <th>Distância Estimada (km)</th>
            <th>Duração Estimada (min)</th>
          </tr>
        </thead>
        <tbody>
          {{#each route}}
            <tr>
              <td>{{this.path.origin}}</td>
              <td>{{this.path.destination}}</td>
              <td>
                {{#each this.path.stops}}
                  {{this}}{{#unless @last}}, {{/unless}}
                {{/each}}
              </td>
              <td>{{this.estimatedDistance}}</td>
              <td>{{this.estimatedDuration}}</td>
            </tr>
          {{/each}}
        </tbody>
        <tfoot>
          <tr>
            <td colspan='5'>Total de rotas: {{route.length}}</td>
          </tr>
        </tfoot>
      </table>
    </section>

    <section>
      <h2>Histórico de Rotas</h2>
      {{#if history}}
        <table>
          <thead>
            <tr>
              <th>Data</th>
              <th>Odômetro Inicial</th>
              <th>Odômetro Final</th>
              <th>Distância Percorrida</th>
              <th>Observações</th>
              <th>Status</th>
              <th>Início</th>
              <th>Término</th>
              <th>Origem</th>
              <th>Destino</th>
              <th>Paradas</th>
            </tr>
          </thead>
          <tbody>
            {{#each history}}
              <tr>
                <td>{{this.data}}</td>
                <td>{{this.odometerInitial}} km</td>
                <td>{{this.odometerFinal}} km</td>
                <td>{{this.elapsedDistance}} km</td>
                <td>{{this.observation}}</td>
                <td>{{this.status}}</td>
                <td>{{this.inicio}}</td>
                <td>{{this.termino}}</td>
                <td>{{this.path.origin}}</td>
                <td>{{this.path.destination}}</td>
                <td>
                  {{#each this.path.stops}}
                    {{this}}{{#unless @last}}, {{/unless}}
                  {{/each}}
                </td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      {{else}}
        <p>Nenhum histórico encontrado.</p>
      {{/if}}
    </section>

  </body>
</html>